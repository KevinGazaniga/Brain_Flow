<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../Styles/logar.css">
    <script src="../assets/Scripts/logar.js"></script>
    <title>Login</title>
</head>
<body>
    <div class="centro">
        <a class="centro titulo">Login</a>
        <div class="entrada">
            <input class="caixa_texto" placeholder="Insira seu nome" id="nome"></input>
            <input class="caixa_texto" type="password" placeholder="Informe sua senha" id="Senha"></input>
        </div>
        <div class="botoes">
            <div class="espaço">
                <a href="../pages/Tela2.html">
                    <button class="entrar" onclick="entrar()" >Entrar</button>
                </a>
            </div>
            <div>
                <a href="../pages/cadastro.html">
                    <button type="button" class="cadastrar brilhante">Não possui uma conta? Cadastre-se aqui</button>
                </a>
            </div>
        </div>
    </div>

    <script>
        document.querySelector("form").addEventListener('submit', (event) => {
            event.preventDefault()
            const nome = document.querySelector("#nome")
            const senha = document.querySelector("#senha")
            login(nome, senha)
        })

        async function login(nome, senha) {
           console.log({ nome, senha }) 
           const resposta = await fetch("https://q4d76s-3000.csb.app/login", {
            method: "POST",
            body: JSON.stringify({
                nome,
                senha
              }),
              headers: {
                "Content-Type": "application/json"
              }
        })
        const json = await resposta.json()
        localStorage.setItem("token", json.token)
    }         
    </script>
</body>
</html>